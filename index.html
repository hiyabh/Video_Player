<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes"
    />
    <title>Video Player</title>

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
      integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
      crossorigin="anonymous"
    />

    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
      integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
      crossorigin="anonymous"
    ></script>

    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <script src="https://unpkg.com/konva@3.2.6/konva.min.js"></script>

    <link rel="stylesheet" href="style.css" />

    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript" src="script_canvas.js"></script>
    <script type="text/javascript" src="transformvideo.js"></script>

    <link rel="preload" href="video/DJI_05_08.mp4" as="video" />

    <style>
      button {
        background-color: rgb(209, 207, 207);
        /* Green */
        /* border: none; */
        color: rgb(5, 5, 5);
        padding: 0px 8px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 22px;
        border-radius: 5px;
      }

      button:hover {
        box-shadow: 0 6px 8px 0 rgba(0, 0, 0, 0.24),
          0 7px 20px 0 rgba(0, 0, 0, 0.19);
      }

      button:active {
        color: rgb(245, 239, 239);
      }

      #playpausebtn {
        border-radius: 50%;
        font-size: 28px;
      }

      form label,
      form button {
        background-color: #7f9ccb;
        padding: 5px 10px;
        border-radius: 5px;
        border: 1px ridge black;
        font-size: 0.8rem;
        height: auto;
      }

      form label:hover,
      form button:hover {
        background-color: #2d5ba3;
        color: white;
      }

      form label:active,
      form button:active {
        background-color: #0d3f8f;
        color: white;
      }
    </style>
  </head>

  <body>
    <div class="container-fluid">
      <!-- Navigation -->
      <nav
        class="navbar navbar-expand-lg static-top"
        style="margin-left: 5px"
      >
        <a class="navbar-brand" href="index.html" style="padding: 2px">
          <img
            class="responsive"
            src="images/code.png"
            alt=""
            style="width: 15%"
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse float-right" id="navbarResponsive">
          <ul class="navbar-nav ml-auto navbar-right">
            <li class="nav-item active">
              <a class="nav-link" href="login.html">Login</a>
            </li>
          </ul>
        </div>
      </nav>
      <!-- /.Navigation -->

      <!--Content-->
      <div class="container-fluid">
        <div class="row">
          <div class="col-2" style="z-index: 2; padding: 5px; height: 82vh">
            <div style="float: none">
            </br>
              <div id="media-play-list" style="color: rgb(8, 8, 8)">
                <h4>Upload video</h4>
                <input
                  type="file"
                  value="Upload video"
                  id="image_uploads"
                  name="image_uploads"
                  accept="video/*"
                  style="color: transparent"
                />
              </div>
            </div>
          </div>

          <div class="col-8">
            <div style="width: 100%; margin: 0">
              <div class="playr_wrapper" id="playr_wrapper_0" tabindex="0">
                <div
                  class="playr_captions_wrapper"
                  id="playr_captions_wrapper_0 my_video"
                >
                  <div
                    class="playr_video_container"
                    id="playr_video_container_0"
                    style="border: 1px #ffffff; overflow: hidden"
                  >
                    <video
                      class="playr_video"
                      id="playr_video_0"
                      oncanplay="isLoaded()"
                      ontimeupdate="myFunction(this)"
                    >
                      <source
                        src="video/DJI_05_08_Trim1.mp4"
                        preload="metadata"
                        type="video/mp4"
                      />
                    </video>
                  </div>
                  <div class="playr_captions" id="playr_captions_0"></div>
                </div>

                <div class="row wrapper">
                  <div class="col-9 box">
                    <progress id="progress-bar" min="0" max="100" value="0">
                      0% played
                    </progress>
                  </div>
                  <div class="col-1 box">
                    <div>
                      <span id="playr_video_curpos_0" role="timer">00</span> /
                      <span id="playr_video_duration_0">00</span>
                    </div>
                  </div>
                  <div class="col-2 box">
                    <input
                      type="number"
                      id="chooseFrame"
                      name="chooseFrame"
                      min="1"
                      style="width: 50%; height: 100%"
                    />
                    <button
                      class="choosebtn"
                      id="choosebtn"
                      tabindex="0"
                      onclick="choose();"
                    >
                      &#10173;
                    </button>
                  </div>
                </div>
                <div id="change">
                  <button
                    class="revSpeed"
                    id="revSpeed"
                    onclick="revSpeed(3.0)"
                  >
                    &#10094;&#10094;
                  </button>
                  <button class="rev" id="rev" onclick="rev(1.0)">
                    &#10094;
                  </button>
                  <button
                    class="playpausebtn"
                    id="playpausebtn"
                    onclick="playPause()"
                  >
                    &#9654;
                  </button>
                  <button
                    class="speedbtn"
                    id="speedbtn"
                    onclick="setPlaySpeed()"
                  >
                    &#10095;&#10095;
                  </button>
                  <button class="zoomin" id="zoomin">+</button>
                  <button class="zoomout" id="zoomout">-</button>
                  <button class="left" id="left">⇠</button>
                  <button class="right" id="right">⇢</button>
                  <button class="up" id="up">⇡</button>
                  <button class="down" id="down">⇣</button>
                  <button class="rotateleft" id="rotateleft">&#x21bb;</button>
                  <button class="rotateright" id="rotateright">&#x21ba;</button>
                  <button class="reset" id="reset">reset</button>
                  <span id="styleX"></span>
                  <span id="styleY"></span>
                </div>
              </div>
            </div>
            <!-- <div id="container"></div> -->
          </div>

          <div class="col-2" style="padding: 5px; height: 82vh">
            <div style="float: none">
              <!-- <canvas style="border: 1px solid black; width: 100%;"></canvas> -->
              <div id="stage" style="background-color: white"></div>
              <div id="controls"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--/.Content-->

    <!-- Footer -->
    <footer class="page-footer font-small blue fixed-bottom">
     
    </footer>
    <!-- Footer -->

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <script>
      //Choose Video

      var input1 = document.querySelector("#image_uploads");
      var preview = document.querySelector("#playr_video_0");

      input1.addEventListener("change", updateImageDisplay);
      function updateImageDisplay() {
        while (preview.firstChild) {
          preview.removeChild(preview.firstChild);
        }

        var curFiles = input1.files;
        if (curFiles.length === 0) {
          var para = document.createElement("p");
          para.textContent = "No files currently selected for upload";
          preview.appendChild(para);
        } else {
          var list = document.createElement("ol");
          preview.appendChild(list);
          for (var i = 0; i < curFiles.length; i++) {
            var listItem = document.createElement("li");
            var para = document.createElement("p");
            if (validFileType(curFiles[i])) {
              para.textContent =
                "File name " +
                curFiles[i].name +
                ", file size " +
                returnFileSize(curFiles[i].size) +
                ".";
              var vid1 = document.createElement("video");
              vid1.src = window.URL.createObjectURL(curFiles[i]);
              vid1.autoplay = true;

              // listItem.appendChild(vid1);
              // listItem.appendChild(para);

              loadVideo(vid1.src);
            } else {
              para.textContent =
                "File name " +
                curFiles[i].name +
                ": Not a valid file type. Update your selection.";
              listItem.appendChild(para);
            }

            list.appendChild(listItem);
          }
        }
      }
      var fileTypes = ["video/mp4", "video/ogg"];

      function validFileType(file) {
        for (var i = 0; i < fileTypes.length; i++) {
          if (file.type === fileTypes[i]) {
            return true;
          }
        }

        return false;
      }
      function returnFileSize(number) {
        if (number < 1024) {
          return number + "bytes";
        } else if (number >= 1024 && number < 1048576) {
          return (number / 1024).toFixed(1) + "KB";
        } else if (number >= 1048576) {
          return (number / 1048576).toFixed(1) + "MB";
        }
      }
    </script>
  </body>
</html>
